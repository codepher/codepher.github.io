{"title":"通过docker安装多版本PHP","uid":"c4b49421678335898bba750d40c7be0a","slug":"notes/通过docker安装多版本PHP","date":"2020-09-14T16:00:00.000Z","updated":"2021-07-08T16:14:04.395Z","comments":true,"path":"api/articles/notes/通过docker安装多版本PHP.json","keywords":null,"cover":null,"content":"<ul>\n<li><p>php</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker run -p 9072:9000 --name  php72-fpm -v &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html:&#x2F;www -v $PWD&#x2F;conf&#x2F;php72:&#x2F;usr&#x2F;local&#x2F;etc&#x2F;php -v &#x2F;var&#x2F;log&#x2F;php72:&#x2F;phplogs   -d php:7.2-fpm\n\ndocker run -p 9056:9000 --name  php56-fpm -v &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html:&#x2F;www -d php:5.6-fpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>nginx</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">server &#123;\n        listen       80;\n        server_name  php72.codepher.com;\n\n        # 默认网站根目录（www目录）\n        root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;\n\n        # Load configuration files for the default server block.\n        #include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;\n\n        location &#x2F; &#123;\n            # 这里改动了 定义首页索引文件的名称\n            index index.php index.html index.htm;\n        &#125;\n\n        error_page 404 &#x2F;404.html;\n            location &#x3D; &#x2F;40x.html &#123;\n        &#125;\n\n        error_page 500 502 503 504 &#x2F;50x.html;\n            location &#x3D; &#x2F;50x.html &#123;\n        &#125;\n\n        # 这里新加的\n        # PHP 脚本请求全部转发到 FastCGI处理. 使用FastCGI协议默认配置.\n        # Fastcgi服务器和程序(PHP,Python)沟通的协议.\n        location ~ \\.php$ &#123;\n            # 设置监听端口\n            fastcgi_pass   127.0.0.1:9072;\n            # 设置nginx的默认首页文件(上面已经设置过了，可以删除)\n            fastcgi_index  index.php;\n            # 设置脚本文件请求的路径\n            fastcgi_param  SCRIPT_FILENAME &#x2F;www&#x2F;$fastcgi_script_name;\n            # 引入fastcgi的配置文件\n            include        fastcgi_params;\n        &#125;\n    &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li><p>portainer</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">upstream portainer &#123;\n      server 127.0.0.1:9000;\n&#125;\n\nserver&#123;\n    listen 80;\n    server_name  portainer.backend.codepher.com;\n\n    # access_log  logs&#x2F;portainer.backend.codepher.com.access.log  main;\n    # error_log  logs&#x2F;portainer.backend.codepher.com.error.log;\n    # root   html;\n    index  index.html;\n\n    location &#x2F;.well-known&#x2F;  &#123;\n        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;portainer\n        index index.html;\n    &#125;\n    \n    #Proxy Settings\n    proxy_redirect     off;\n    proxy_set_header   Host             $host;\n    proxy_set_header   X-Real-IP        $remote_addr;\n    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n    proxy_max_temp_file_size 0;\n    proxy_connect_timeout      90;\n    proxy_send_timeout         90;\n    proxy_read_timeout         90;\n    proxy_buffer_size          4k;\n    proxy_buffers              4 32k;\n    proxy_busy_buffers_size    64k;\n    proxy_temp_file_write_size 64k;\n\n    ## send request ##\n    location &#x2F; &#123;\n        proxy_pass  http:&#x2F;&#x2F;portainer;\n   &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li><p>mysql</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo docker run -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD&#x3D;123456 -d mysql:5.6<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n</ul>\n","text":" php docker run -p 9072:9000 --name php72-fpm -v &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html:&#x2F;www -v $PWD&#x2F;conf&#x2F;php72:&#x2F;usr&...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"codepher","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"nginx 部分配置","uid":"f09237cb0d479f49002bcc31d39df114","slug":"notes/nginx 部分配置","date":"2020-09-14T16:00:00.000Z","updated":"2020-09-15T13:07:44.202Z","comments":true,"path":"api/articles/notes/nginx 部分配置.json","keywords":null,"cover":null,"text":" 转至https server { listen 80; server_name host; rewrite ^(.*)$ https://${server_name}$1 permanent; } php5.6 location ~ \\.php$ { # 设置监听端口 fast...","link":"","photos":[],"count_time":{"symbolsCount":510,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"codepher","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"notes/docker","date":"2020-02-18T09:15:54.236Z","updated":"2020-02-18T09:16:08.537Z","comments":true,"path":"api/articles/notes/docker.json","keywords":null,"cover":null,"text":" Forbidden path outside the build context: ../dist/ () 禁止 ","link":"","photos":[],"count_time":{"symbolsCount":59,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"codepher","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}